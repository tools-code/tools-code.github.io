<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>JSONè§£æå™¨åœ¨çº¿ - å…è´¹JSONæ ¼å¼åŒ–ä¸éªŒè¯å·¥å…·</title>
    <meta name="description" content="æ— éœ€å®‰è£…ï¼Œåœ¨çº¿JSONæ ¼å¼åŒ–ã€éªŒè¯ã€è§£æå·¥å…·ï¼Œæ”¯æŒè¯­æ³•é«˜äº®ã€é”™è¯¯æç¤ºã€å¤åˆ¶ã€æ¸…ç©ºç­‰åŠŸèƒ½ã€‚">
    <meta name="keywords" content="JSONè§£æå™¨,JSONæ ¼å¼åŒ–,JSONéªŒè¯,åœ¨çº¿JSONå·¥å…·">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="baidu-site-verification" content="codeva-vpfc6UOMEK" />
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/jsoneditor/10.2.0/jsoneditor.min.css">
    <script src="https://cdn.bootcdn.net/ajax/libs/jsoneditor/10.2.0/jsoneditor.min.js"></script>
</head>

<body>
    <!-- é¡¶éƒ¨èœå•æ  -->
    <div class="topbar">
        <a href="index.html" class="active">é¦–é¡µ</a>
        <a href="docs.html">æ–‡ç« é¡µ</a>
    </div>

    <div class="shell">
        <h1 class="page-title">JSONè§£æå™¨åœ¨çº¿</h1>
        <div class="subtitle">å…è´¹ã€é«˜æ•ˆçš„JSONæ ¼å¼åŒ–ä¸éªŒè¯å·¥å…·</div>
        
        <div class="nav">
            <div class="brand">
                <span class="dot"></span>
                <span>JSON è§£æå™¨</span>
            </div>
            <div class="controls">
                    <button class="btn info" onclick="loadSample()">ç¤ºä¾‹</button>
                    <button class="btn success" onclick="formatJSON()">æ ¼å¼åŒ–</button>
                    <button class="btn warning" onclick="minifyJSON()">å‹ç¼©</button>
                    <button class="btn secondary" onclick="validateJSON()">éªŒè¯</button>
                    <button class="btn danger" onclick="clearText()">æ¸…ç©º</button>
                </div>
        </div>

        <div id="alert" class="alert"></div>

        <div class="card json-editor-card">
            <div class="editor-header">
                <div class="editor-stats" id="jsonStats">å­—ç¬¦æ•°: 0 | è¡Œæ•°: 0</div>
            </div>
            
            <div class="editor-container">
                <div class="editor-panel left-panel">
                    <div class="panel-title">ä»£ç è§†å›¾</div>
                    <div id="codeEditor" style="width: 100%; height: 450px;"></div>
                </div>
                <div class="editor-divider"></div>
                <div class="editor-panel right-panel">
                    <div class="panel-title">æ ‘è§†å›¾</div>
                    <div id="treeEditor" style="width: 100%; height: 450px;"></div>
                </div>
            </div>
        </div>

        <div class="features-container">
            <div class="feature-card">
                <div class="feature-icon">âœ¨</div>
                <div class="feature-title">è¯­æ³•é«˜äº®</div>
                <div class="feature-desc">æ™ºèƒ½è¯†åˆ«JSONè¯­æ³•ï¼Œæä¾›æ¸…æ™°çš„ä»£ç é«˜äº®æ˜¾ç¤ºï¼Œæå‡é˜…è¯»ä½“éªŒ</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ“</div>
                <div class="feature-title">æ ¼å¼åŒ–ä¸å‹ç¼©</div>
                <div class="feature-desc">ä¸€é”®æ ¼å¼åŒ–JSONï¼Œä½¿å…¶æ˜“äºé˜…è¯»ï¼›æˆ–å‹ç¼©JSONï¼Œå‡å°‘æ•°æ®ä½“ç§¯</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">âœ…</div>
                <div class="feature-title">å®æ—¶éªŒè¯</div>
                <div class="feature-desc">å®æ—¶æ£€æµ‹JSONè¯­æ³•é”™è¯¯ï¼Œæä¾›å‡†ç¡®çš„é”™è¯¯æç¤ºå’Œä½ç½®ä¿¡æ¯</div>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ”„</div>
                <div class="feature-title">è§†å›¾è½¬æ¢</div>
                <div class="feature-desc">ä»£ç è§†å›¾æ¥æ”¶è¾“å…¥ï¼Œæ ¼å¼åŒ–ç»“æœåœ¨æ ‘è§†å›¾æ˜¾ç¤ºï¼Œå‹ç¼©åŠŸèƒ½ä¼˜åŒ–ä»£ç è§†å›¾</div>
            </div>
        </div>

        <div class="remark">
            <h3>ä»€ä¹ˆæ˜¯JSONï¼Ÿ</h3>
            <p>
                <strong>JSONï¼ˆJavaScript Object Notationï¼‰</strong> æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œæ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚å®ƒåŸºäº JavaScript ç¼–ç¨‹è¯­è¨€çš„ä¸€ä¸ªå­é›†ï¼Œä½†é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºè¯­è¨€çš„æ–‡æœ¬æ ¼å¼ã€‚
            </p>

            <h3>ä¸ºä»€ä¹ˆä½¿ç”¨JSONï¼Ÿ</h3>
            <p>
                JSONå·²æˆä¸ºWebåº”ç”¨ç¨‹åºä¸­æœ€å¸¸ç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œè¢«å¹¿æ³›åº”ç”¨äºAPIäº¤äº’ã€é…ç½®æ–‡ä»¶ã€æ•°æ®å­˜å‚¨ç­‰åœºæ™¯ã€‚å®ƒæ¯”XMLæ›´ç®€æ´ï¼Œè§£æé€Ÿåº¦æ›´å¿«ï¼Œå¹¶ä¸”è¢«å‡ ä¹æ‰€æœ‰ä¸»æµç¼–ç¨‹è¯­è¨€æ”¯æŒã€‚
            </p>
        </div>

        <div class="wise_saying">
            <b>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚â€”â€”ã€Šè®ºè¯­Â·å«çµå…¬ã€‹</b>
        </div>

        <div class="footer">
            <!-- å‹é“¾ç›´æ¥ç¡¬ç¼–ç åœ¨è¿™é‡Œ -->
            <div class="friend-links">
                <h3>å‹æƒ…é“¾æ¥</h3>
                <div class="links-container">
                    <a href="./website/sitemap.xml" target="_blank" rel="noopener">ç«™ç‚¹åœ°å›¾</a>
                    <a href="https://m3u8play502.github.io" target="_blank" rel="noopener">M3U8åœ¨çº¿æ’­æ”¾</a>
                    <a href="https://www.csdn.net/" target="_blank" rel="noopener">CSDN</a>
                    <a href="https://www.cnblogs.com/" target="_blank" rel="noopener">åšå®¢å›­</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–ç¤ºä¾‹JSONæ•°æ®
        const initialSample = {
            "name": "JSONè§£æå™¨",
            "version": "1.0.0",
            "description": "åœ¨çº¿JSONæ ¼å¼åŒ–ä¸éªŒè¯å·¥å…·",
            "features": [
                "è¯­æ³•é«˜äº®",
                "é”™è¯¯æç¤º",
                "JSONæ ¼å¼åŒ–",
                "JSONå‹ç¼©",
                "ä¸€é”®å¤åˆ¶"
            ],
            "isActive": true,
            "count": 0
        };

        // é¡µé¢å…ƒç´ 
        const alert = document.getElementById('alert');
        const jsonStats = document.getElementById('jsonStats');
        let codeEditor = null;
        let treeEditor = null;

        // æ˜¾ç¤ºæç¤ºä¿¡æ¯
        function showAlert(text, isError = false) {
            alert.textContent = text;
            alert.style.display = text ? 'block' : 'none';
            alert.style.color = isError ? '#ef4444' : '#0f766e';
            
            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            alert.style.animation = 'none';
            alert.offsetHeight; // è§¦å‘é‡æ’
            alert.style.animation = isError ? 'shake 0.5s' : 'fadeIn 0.5s';
        }

        // åˆå§‹åŒ–ä»£ç ç¼–è¾‘å™¨
        function initCodeEditor() {
            try {
                const container = document.getElementById('codeEditor');
                if (!container) {
                    showAlert('ä»£ç ç¼–è¾‘å™¨å®¹å™¨æœªæ‰¾åˆ°', true);
                    return;
                }
                
                const options = {
                    mode: 'code',
                    modes: ['code'],
                    search: true,
                    history: true,
                    mainMenuBar: false,
                    navigationBar: false,
                    statusBar: false,
                    onValidate: function (json) {
                        try {
                            JSON.parse(JSON.stringify(json));
                            return { valid: true };
                        } catch (error) {
                            return { valid: false, errors: [error] };
                        }
                    },
                    onError: function (error) {
                        showAlert(`ä»£ç ç¼–è¾‘å™¨é”™è¯¯: ${error}`, true);
                    }
                };

                // åˆ›å»ºç¼–è¾‘å™¨
                codeEditor = new JSONEditor(container, options);
                
                // è®¾ç½®åˆå§‹æ•°æ®
                codeEditor.set(initialSample);
                
                // ç›‘å¬å˜åŒ–æ›´æ–°ç»Ÿè®¡ - æ–¹æ³•1: äº‹ä»¶ç›‘å¬
                try {
                    // å°è¯•ä½¿ç”¨onæ–¹æ³•
                    if (typeof codeEditor.on === 'function') {
                        codeEditor.on('change', function() {
                            try {
                                updateStats();
                            } catch (error) {
                                // æ›´æ–°å¤±è´¥æ—¶ä¸æ˜¾ç¤ºé”™è¯¯
                            }
                        });
                    } 
                    // å°è¯•ä½¿ç”¨å…¶ä»–å¯èƒ½çš„äº‹ä»¶ç›‘å¬æ–¹æ³•ï¼ˆæ ¹æ®ä¸åŒç‰ˆæœ¬çš„APIï¼‰
                    else if (typeof codeEditor.addEventListener === 'function') {
                        codeEditor.addEventListener('change', function() {
                            try {
                                updateStats();
                            } catch (error) {
                                // æ›´æ–°å¤±è´¥æ—¶ä¸æ˜¾ç¤ºé”™è¯¯
                            }
                        });
                    } else {
                        console.warn('æœªæ‰¾åˆ°é€‚åˆçš„äº‹ä»¶ç›‘å¬æ–¹æ³•');
                    }
                } catch (error) {
                    console.error('è®¾ç½®äº‹ä»¶ç›‘å¬å¤±è´¥:', error);
                }
                
                // æ–¹æ³•2: æ·»åŠ å®šæ—¶å™¨å®šæœŸæ›´æ–°ï¼ˆç¡®ä¿å®æ—¶æ›´æ–°ï¼‰
                try {
                    // æ¯500æ¯«ç§’æ›´æ–°ä¸€æ¬¡ç»Ÿè®¡ä¿¡æ¯
                    setInterval(function() {
                        try {
                            if (codeEditor) {
                                updateStats();
                            }
                        } catch (error) {
                            // æ›´æ–°å¤±è´¥æ—¶ä¸æ˜¾ç¤ºé”™è¯¯
                        }
                    }, 500);
                } catch (error) {
                    console.error('è®¾ç½®å®šæœŸæ›´æ–°å¤±è´¥:', error);
                }
            } catch (error) {
                showAlert(`ä»£ç ç¼–è¾‘å™¨åˆå§‹åŒ–å¤±è´¥: ${error.message}`, true);
                console.error('ä»£ç ç¼–è¾‘å™¨åˆå§‹åŒ–é”™è¯¯:', error);
            }
        }

        // åˆå§‹åŒ–æ ‘ç¼–è¾‘å™¨ï¼ˆåªè¯»æ¨¡å¼ï¼‰
        function initTreeEditor() {
            try {
                const container = document.getElementById('treeEditor');
                if (!container) {
                    showAlert('æ ‘ç¼–è¾‘å™¨å®¹å™¨æœªæ‰¾åˆ°', true);
                    return;
                }
                
                const options = {
                    mode: 'tree',
                    modes: ['tree'],
                    search: true,
                    history: false, // ç¦ç”¨å†å²è®°å½•
                    mainMenuBar: false,
                    navigationBar: false,
                    statusBar: false,
                    onValidate: function (json) {
                        try {
                            JSON.parse(JSON.stringify(json));
                            return { valid: true };
                        } catch (error) {
                            return { valid: false, errors: [error] };
                        }
                    },
                    onError: function (error) {
                        showAlert(`æ ‘ç¼–è¾‘å™¨é”™è¯¯: ${error}`, true);
                    }
                };

                // åˆ›å»ºç¼–è¾‘å™¨
                treeEditor = new JSONEditor(container, options);
                
                // è®¾ç½®åˆå§‹æ•°æ®
                treeEditor.set(initialSample);
                
                // æ ‘è§†å›¾ä¸ç›‘å¬å˜åŒ–ï¼Œä»…ç”¨äºæ˜¾ç¤º
            } catch (error) {
                showAlert(`æ ‘ç¼–è¾‘å™¨åˆå§‹åŒ–å¤±è´¥: ${error.message}`, true);
                console.error('æ ‘ç¼–è¾‘å™¨åˆå§‹åŒ–é”™è¯¯:', error);
            }
        }

        // åŠ è½½ç¤ºä¾‹æ•°æ®ï¼ˆåªè®¾ç½®ä»£ç è§†å›¾ï¼‰
        function loadSample() {
            try {
                // æ£€æŸ¥ç¼–è¾‘å™¨æ˜¯å¦åˆå§‹åŒ–
                if (!codeEditor) {
                    showAlert('ä»£ç ç¼–è¾‘å™¨æœªåˆå§‹åŒ–', true);
                    return;
                }
                
                codeEditor.set(initialSample);
                updateStats();
                showAlert('å·²åŠ è½½ç¤ºä¾‹JSONæ•°æ®');
            } catch (error) {
                showAlert(`åŠ è½½ç¤ºä¾‹å¤±è´¥: ${error.message}`, true);
            }
        }

        // æ ¼å¼åŒ–JSONï¼ˆå°†ä»£ç è§†å›¾çš„JSONæ•°æ®æ ¼å¼åŒ–ååœ¨æ ‘è§†å›¾æ˜¾ç¤ºï¼ŒåŒæ—¶ç¾åŒ–ä»£ç è§†å›¾ï¼‰
        function formatJSON() {
            try {
                // æ£€æŸ¥ç¼–è¾‘å™¨æ˜¯å¦åˆå§‹åŒ–
                if (!codeEditor) {
                    showAlert('ä»£ç ç¼–è¾‘å™¨æœªåˆå§‹åŒ–', true);
                    return;
                }
                if (!treeEditor) {
                    showAlert('æ ‘ç¼–è¾‘å™¨æœªåˆå§‹åŒ–', true);
                    return;
                }
                
                // ä»ä»£ç ç¼–è¾‘å™¨è·å–åŸå§‹JSONæ•°æ®
                const json = codeEditor.get();
                // å°†ä»£ç è§†å›¾çš„æ•°æ®åœ¨æ ‘è§†å›¾ä¸­æ ¼å¼åŒ–æ˜¾ç¤º
                treeEditor.set(json);
                // åŒæ—¶ç¾åŒ–ä»£ç è§†å›¾
                beautifyCodeView();
            } catch (error) {
                showAlert(`æ ¼å¼åŒ–å¤±è´¥: ${error.message}`, true);
                // æ ¼å¼åŒ–å¤±è´¥æ—¶æ¸…ç©ºæ ‘è§†å›¾
                if (treeEditor) {
                    try {
                        treeEditor.set({});
                    } catch (clearError) {
                        console.error('æ¸…ç©ºæ ‘è§†å›¾å¤±è´¥:', clearError);
                    }
                }
            }
        }

        // å‹ç¼©JSONï¼ˆåº”ç”¨äºä»£ç è§†å›¾ï¼‰
        function minifyJSON() {
            try {
                // æ£€æŸ¥ç¼–è¾‘å™¨æ˜¯å¦åˆå§‹åŒ–
                if (!codeEditor) {
                    showAlert('ä»£ç ç¼–è¾‘å™¨æœªåˆå§‹åŒ–', true);
                    return;
                }
                
                // ä»ä»£ç ç¼–è¾‘å™¨è·å–æ•°æ®
                const json = codeEditor.get();
                // è½¬æ¢ä¸ºå‹ç¼©çš„JSONå­—ç¬¦ä¸²å¹¶åº”ç”¨äºä»£ç è§†å›¾
                const minifiedJson = JSON.stringify(json);
                codeEditor.setText(minifiedJson);
                updateStats(); // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
                showAlert('ä»£ç è§†å›¾å·²å‹ç¼©');
            } catch (error) {
                showAlert(`å‹ç¼©å¤±è´¥: ${error.message}`, true);
            }
        }

        // ç¾åŒ–ä»£ç è§†å›¾
        function beautifyCodeView() {
            try {
                // æ£€æŸ¥ç¼–è¾‘å™¨æ˜¯å¦åˆå§‹åŒ–
                if (!codeEditor) {
                    showAlert('ä»£ç ç¼–è¾‘å™¨æœªåˆå§‹åŒ–', true);
                    return;
                }
                
                // ä»ä»£ç ç¼–è¾‘å™¨è·å–æ•°æ®
                const json = codeEditor.get();
                // è½¬æ¢ä¸ºæ ¼å¼åŒ–çš„JSONå­—ç¬¦ä¸²å¹¶åº”ç”¨äºä»£ç è§†å›¾
                const beautifiedJson = JSON.stringify(json, null, 2);
                codeEditor.setText(beautifiedJson);
                updateStats(); // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
                showAlert('ä»£ç è§†å›¾å·²ç¾åŒ–');
            } catch (error) {
                showAlert(`ç¾åŒ–å¤±è´¥: ${error.message}`, true);
            }
        }
        
        // éªŒè¯JSON
        function validateJSON() {
            try {
                // æ£€æŸ¥ç¼–è¾‘å™¨æ˜¯å¦åˆå§‹åŒ–
                if (!codeEditor) {
                    showAlert('ä»£ç ç¼–è¾‘å™¨æœªåˆå§‹åŒ–', true);
                    return;
                }
                
                // ä»ä»£ç ç¼–è¾‘å™¨è·å–æ•°æ®
                const json = codeEditor.get();
                // ä½¿ç”¨JSON.stringifyå’ŒJSON.parseæ¥éªŒè¯
                const jsonStr = JSON.stringify(json);
                JSON.parse(jsonStr);
                showAlert('JSONæ ¼å¼æœ‰æ•ˆ');
            } catch (error) {
                showAlert(`JSONæ ¼å¼æ— æ•ˆ: ${error.message}`, true);
            }
        }

        // æ¸…ç©ºæ–‡æœ¬ï¼ˆåŒæ—¶æ¸…ç©ºä»£ç è§†å›¾å’Œæ ‘è§†å›¾ï¼‰
        function clearText() {
            try {
                // æ£€æŸ¥ç¼–è¾‘å™¨æ˜¯å¦åˆå§‹åŒ–
                if (!codeEditor) {
                    showAlert('ä»£ç ç¼–è¾‘å™¨æœªåˆå§‹åŒ–', true);
                    return;
                }
                
                codeEditor.set({});
                updateStats();
                
                // åŒæ—¶æ¸…ç©ºæ ‘è§†å›¾
                if (treeEditor) {
                    try {
                        treeEditor.set({});
                    } catch (treeClearError) {
                        console.error('æ¸…ç©ºæ ‘è§†å›¾å¤±è´¥:', treeClearError);
                    }
                }
                
                showAlert('');
            } catch (error) {
                showAlert(`æ¸…ç©ºå¤±è´¥: ${error.message}`, true);
            }
        }

        // å¤åˆ¶JSON
        function copyJSON() {
            try {
                // æ£€æŸ¥ç¼–è¾‘å™¨æ˜¯å¦åˆå§‹åŒ–
                if (!codeEditor) {
                    showAlert('ä»£ç ç¼–è¾‘å™¨æœªåˆå§‹åŒ–', true);
                    return;
                }
                
                // ä»ä»£ç ç¼–è¾‘å™¨è·å–æ•°æ®
                const json = codeEditor.get();
                const jsonStr = JSON.stringify(json, null, 2);
                
                navigator.clipboard.writeText(jsonStr).then(function() {
                    showAlert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                }).catch(function(err) {
                    showAlert(`å¤åˆ¶å¤±è´¥: ${err.message}`, true);
                });
            } catch (error) {
                showAlert(`å¤åˆ¶å¤±è´¥: ${error.message}`, true);
            }
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            try {
                // æ£€æŸ¥ç¼–è¾‘å™¨æ˜¯å¦åˆå§‹åŒ–
                if (!codeEditor) {
                    return;
                }
                
                // ä»ä»£ç ç¼–è¾‘å™¨è·å–æ•°æ®
                const json = codeEditor.get();
                const jsonStr = JSON.stringify(json);
                const charCount = jsonStr.length;
                const lineCount = jsonStr.split('\n').length;
                jsonStats.textContent = `å­—ç¬¦æ•°: ${charCount} | è¡Œæ•°: ${lineCount}`;
            } catch (error) {
                // å‡ºé”™æ—¶ä¸æ›´æ–°ç»Ÿè®¡
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', function () {
            initCodeEditor();
            initTreeEditor();
            updateStats();
        });
    </script>
</body>

</html>
