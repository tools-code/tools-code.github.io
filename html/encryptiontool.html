<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>在线加解密工具 - 支持多种加密算法和URL编解码</title>
    <meta name="description" content="免费在线加解密工具，支持Base64、URL、MD5、SHA1、AES等多种算法的编码、解码、加密和解密功能。">
    <meta name="keywords" content="加解密工具,Base64编码,URL编码,MD5加密,SHA1加密,AES加密,在线加密工具">

    <!-- 引入外部资源 -->
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- 引入自定义样式 -->
    <link rel="stylesheet" href="/css/styles.css">
    
    <!-- 加解密工具专用样式 -->
    <style>
        .encryption-container {
            max-width: 900px;
            margin: 0 auto 60px;
        }
        
        .encryption-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        }
        
        .algorithm-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 20px;
            background: rgba(241, 245, 249, 0.8);
            padding: 4px;
            border-radius: 12px;
            flex-wrap: wrap;
        }
        
        .algorithm-tab {
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.25s ease;
            color: var(--muted);
            text-align: center;
            white-space: nowrap;
        }
        
        .algorithm-tab:hover {
            background: rgba(148, 163, 184, 0.15);
            color: var(--text);
        }
        
        .algorithm-tab.active {
            background: var(--brand);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 184, 148, 0.3);
        }
        
        .mode-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 20px;
            background: rgba(241, 245, 249, 0.8);
            padding: 4px;
            border-radius: 8px;
            max-width: 300px;
        }
        
        .mode-tab {
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.25s ease;
            color: var(--muted);
            text-align: center;
            flex: 1;
        }
        
        .mode-tab:hover {
            background: rgba(148, 163, 184, 0.15);
            color: var(--text);
        }
        
        .mode-tab.active {
            background: var(--brand);
            color: white;
            box-shadow: 0 2px 8px rgba(0, 184, 148, 0.3);
        }
        
        .input-output-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .input-output-container {
                grid-template-columns: 1fr;
            }
        }
        
        .textarea-container {
            display: flex;
            flex-direction: column;
        }
        
        .textarea-container label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
        }
        
        .textarea-container textarea {
            width: 100%;
            min-height: 200px;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.2s ease;
        }
        
        .textarea-container textarea:focus {
            outline: none;
            border-color: var(--brand);
            box-shadow: 0 0 0 3px rgba(0, 184, 148, 0.1);
        }
        
        .actions {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .algorithm-options {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }
        
        .option-item {
            display: flex;
            flex-direction: column;
            margin-bottom: 12px;
        }
        
        .option-item:last-child {
            margin-bottom: 0;
        }
        
        .option-item label {
            font-size: 13px;
            color: var(--text);
            margin-bottom: 6px;
        }
        
        .option-item input[type="text"],
        .option-item select {
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 14px;
        }
        
        .btn {
            padding: 10px 20px;
            font-size: 14px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        
        .btn.primary {
            background: var(--brand);
            color: white;
        }
        
        .btn.primary:hover {
            background: #0d9488;
        }
        
        .btn.secondary {
            background: #f1f5f9;
            color: var(--text);
            border: 1px solid var(--border);
        }
        
        .btn.secondary:hover {
            background: #e2e8f0;
        }
        
        .btn.info {
            background: #3b82f6;
            color: white;
        }
        
        .btn.info:hover {
            background: #2563eb;
        }
        
        .btn.success {
            background: #10b981;
            color: white;
        }
        
        .btn.success:hover {
            background: #059669;
        }
        
        .btn.warning {
            background: #f59e0b;
            color: white;
        }
        
        .btn.warning:hover {
            background: #d97706;
        }
        
        .btn.danger {
            background: #ef4444;
            color: white;
        }
        
        .btn.danger:hover {
            background: #dc2626;
        }
    </style>
</head>

<body>
    <!-- 顶部菜单栏 - 参照项目其他页面样式 -->
    <div class="topbar">
        <div class="nav">
            <div class="navbar-brand">
                <a href="/">
                    <i class="fas fa-code"></i>
                </a>
            </div>
            <div class="nav-links">
                <a href="/html/jsonformat.html">JSON格式化</a>
                <a href="/html/m3u8player.html">M3U8在线播放</a>
                <a href="/html/timestampconverter.html">时间戳转换</a>
                <a href="/html/regextool.html">正则表达式</a>
                <a href="/html/qrcodegenerator.html">二维码生成</a>
                <a href="/html/encryptiontool.html" class="active">加解密工具</a>
                <a href="/docs.html">文章页</a>
            </div>
        </div>
    </div>

    <div class="shell">
        <div style="margin: 0px 16px;">
            <section class="section-title">
                <h1>在线加解密工具</h1>
                <p>支持多种加密算法和URL编解码的免费在线工具</p>
            </section>

            <!-- 加解密工具主体 -->
            <section class="encryption-container">
                <div class="encryption-card">
                    <!-- 算法选择标签页 -->
                    <div class="algorithm-tabs">
                        <div class="algorithm-tab active" data-algorithm="url">URL</div>
                        <div class="algorithm-tab" data-algorithm="base64">Base64</div>
                        <div class="algorithm-tab" data-algorithm="md5">MD5</div>
                        <div class="algorithm-tab" data-algorithm="sha1">SHA1</div>
                        <div class="algorithm-tab" data-algorithm="aes">AES</div>
                    </div>

                    <!-- 模式选择标签页 -->
                    <div class="mode-tabs">
                        <div class="mode-tab active" data-mode="encode">编码/加密</div>
                        <div class="mode-tab" data-mode="decode">解码/解密</div>
                    </div>

                    <!-- 算法选项 -->
                    <div class="algorithm-options">
                        <!-- Base64选项 -->
                        <div id="base64-options" class="algorithm-options-content">
                            <div class="option-item">
                                <label for="base64-encoding">字符编码</label>
                                <select id="base64-encoding">
                                    <option value="utf-8" selected>UTF-8</option>
                                    <option value="gb2312">GB2312</option>
                                    <option value="gbk">GBK</option>
                                </select>
                            </div>
                        </div>

                        <!-- URL选项 -->
                        <div id="url-options" class="algorithm-options-content" style="display: none;">
                            <div class="option-item">
                                <label for="url-component">编码类型</label>
                                <select id="url-component">
                                    <option value="all" selected>全部编码</option>
                                    <option value="component">组件编码</option>
                                </select>
                            </div>
                        </div>

                        <!-- MD5选项 -->
                        <div id="md5-options" class="algorithm-options-content" style="display: none;">
                            <div class="option-item">
                                <label for="md5-encoding">字符编码</label>
                                <select id="md5-encoding">
                                    <option value="utf-8" selected>UTF-8</option>
                                    <option value="gb2312">GB2312</option>
                                    <option value="gbk">GBK</option>
                                </select>
                            </div>
                        </div>

                        <!-- SHA1选项 -->
                        <div id="sha1-options" class="algorithm-options-content" style="display: none;">
                            <div class="option-item">
                                <label for="sha1-encoding">字符编码</label>
                                <select id="sha1-encoding">
                                    <option value="utf-8" selected>UTF-8</option>
                                    <option value="gb2312">GB2312</option>
                                    <option value="gbk">GBK</option>
                                </select>
                            </div>
                        </div>

                        <!-- AES选项 -->
                        <div id="aes-options" class="algorithm-options-content" style="display: none;">
                            <div class="option-item">
                                <label for="aes-key">密钥</label>
                                <input type="text" id="aes-key" placeholder="请输入AES密钥" value="1234567890abcdef">
                            </div>
                            <div class="option-item">
                                <label for="aes-mode">模式</label>
                                <select id="aes-mode">
                                    <option value="ecb" selected>ECB</option>
                                    <option value="cbc">CBC</option>
                                </select>
                            </div>
                            <div id="aes-iv-container" class="option-item" style="display: none;">
                                <label for="aes-iv">初始向量(IV)</label>
                                <input type="text" id="aes-iv" placeholder="请输入初始向量" value="abcdef1234567890">
                            </div>
                            <div class="option-item">
                                <label for="aes-padding">填充方式</label>
                                <select id="aes-padding">
                                    <option value="pkcs7" selected>PKCS7</option>
                                    <option value="zeros">Zeros</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 输入输出区域 -->
                    <div class="input-output-container">
                        <div class="textarea-container">
                            <label for="input-text">输入文本</label>
                            <textarea id="input-text" placeholder="请输入要处理的文本"></textarea>
                        </div>
                        <div class="textarea-container">
                            <label for="output-text">输出结果</label>
                            <textarea id="output-text" placeholder="处理结果将显示在这里" readonly></textarea>
                        </div>
                    </div>

                    <!-- 操作按钮 -->
                    <div class="actions">
                        <button id="process-btn" class="btn primary action-btn">
                            <i class="fas fa-cog"></i>
                            <span>处理</span>
                        </button>
                        <button id="copy-btn" class="btn info action-btn">
                            <i class="fas fa-copy"></i>
                            <span>复制结果</span>
                        </button>
                        <button id="clear-btn" class="btn secondary action-btn">
                            <i class="fas fa-trash"></i>
                            <span>清空</span>
                        </button>
                        <button id="swap-btn" class="btn warning action-btn">
                            <i class="fas fa-exchange-alt"></i>
                            <span>交换</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 特性介绍 -->
            <div class="features-container">
                <div class="feature-card">
                    <div class="feature-icon">🔐</div>
                    <div class="feature-title">多种算法</div>
                    <div class="feature-desc">支持Base64、URL、MD5、SHA1和AES等多种常用的加密解密算法</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">⚙️</div>
                    <div class="feature-title">灵活配置</div>
                    <div class="feature-desc">每种算法都提供相应的配置选项，满足不同的加密解密需求</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">📋</div>
                    <div class="feature-title">便捷操作</div>
                    <div class="feature-desc">支持一键复制结果、清空输入、交换输入输出等便捷操作</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🔄</div>
                    <div class="feature-title">双向转换</div>
                    <div class="feature-desc">支持编码/加密与解码/解密的双向转换，操作简单直观</div>
                </div>
            </div>

            <!-- 工具说明 -->
            <div class="remark">
                <h3>如何使用本工具？</h3>
                <p>
                    1. 选择您需要使用的加密算法（如Base64、URL、MD5等）<br>
                    2. 选择操作模式：编码/加密或解码/解密<br>
                    3. 根据需要配置相应的算法参数<br>
                    4. 在输入框中输入要处理的文本<br>
                    5. 点击"处理"按钮获取结果<br>
                    6. 可以使用"复制结果"、"清空"、"交换"等按钮进行辅助操作
                </p>

                <h3>各种算法的用途</h3>
                <ul>
                    <li><strong>Base64：</strong> 用于将二进制数据编码为ASCII字符，常用于URL、Cookie、网页中嵌入图片等场景</li>
                    <li><strong>URL：</strong> 用于将URL中的特殊字符转换为安全的表示形式，确保URL可以正确传输</li>
                    <li><strong>MD5：</strong> 一种常用的哈希算法，用于生成数据的128位哈希值，常用于文件校验</li>
                    <li><strong>SHA1：</strong> 一种安全哈希算法，用于生成数据的160位哈希值，提供更高的安全性</li>
                    <li><strong>AES：</strong> 高级加密标准，一种对称加密算法，用于保护敏感数据的安全传输</li>
                </ul>

                <h3>安全提示</h3>
                <p>
                    本工具在浏览器端完成所有加解密操作，不会将您的敏感数据上传到服务器。但请注意，在公共场所使用时，
                    请确保及时清空您的输入内容，以保护您的隐私和数据安全。
                </p>
            </div>

            <div class="wise_saying">
                <b>数据安全是一切的基础。—— 信息安全谚语</b>
            </div>

            <div class="footer">
                <!-- 友链直接硬编码在这里 -->
                <div class="friend-links">
                    <h3>友情链接</h3>
                    <div class="links-container">
                        <a href="/website/sitemap.xml"  rel="noopener">站点地图</a>
                        <a href="https://www.csdn.net/"  rel="noopener">CSDN</a>
                        <a href="https://www.cnblogs.com/"  rel="noopener">博客园</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // 抽象加密解密工具类
        class CryptoAlgorithm {
            constructor() {
                this.name = 'generic';
            }
            
            encode(input, options = {}) {
                throw new Error('encode method must be implemented');
            }
            
            decode(input, options = {}) {
                throw new Error('decode method must be implemented');
            }
        }
        
        // Base64算法实现
        class Base64Algorithm extends CryptoAlgorithm {
            constructor() {
                super();
                this.name = 'base64';
            }
            
            encode(input, options = {}) {
                try {
                    // 简单的Base64编码实现
                    return btoa(unescape(encodeURIComponent(input)));
                } catch (error) {
                    throw new Error(`Base64编码失败: ${error.message}`);
                }
            }
            
            decode(input, options = {}) {
                try {
                    // 简单的Base64解码实现
                    return decodeURIComponent(escape(atob(input)));
                } catch (error) {
                    throw new Error(`Base64解码失败: ${error.message}`);
                }
            }
        }
        
        // URL算法实现
        class URLAlgorithm extends CryptoAlgorithm {
            constructor() {
                super();
                this.name = 'url';
            }
            
            encode(input, options = {}) {
                try {
                    const component = options.component || false;
                    return component ? encodeURIComponent(input) : encodeURI(input);
                } catch (error) {
                    throw new Error(`URL编码失败: ${error.message}`);
                }
            }
            
            decode(input, options = {}) {
                try {
                    const component = options.component || false;
                    return component ? decodeURIComponent(input) : decodeURI(input);
                } catch (error) {
                    throw new Error(`URL解码失败: ${error.message}`);
                }
            }
        }
        
        // MD5算法实现
        class MD5Algorithm extends CryptoAlgorithm {
            constructor() {
                super();
                this.name = 'md5';
            }
            
            encode(input, options = {}) {
                try {
                    // 简化版MD5实现
                    return this.md5(input);
                } catch (error) {
                    throw new Error(`MD5计算失败: ${error.message}`);
                }
            }
            
            decode(input, options = {}) {
                throw new Error('MD5是单向哈希算法，无法解密');
            }
            
            // 简化版MD5实现
            md5(str) {
                // 这里使用一个简化版的MD5实现
                // 实际生产环境中应该使用标准的MD5库
                let hash = 0;
                if (str.length === 0) return hash.toString();
                for (let i = 0; i < str.length; i++) {
                    const char = str.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash; // Convert to 32bit integer
                }
                return Math.abs(hash).toString(16);
            }
        }
        
        // SHA1算法实现
        class SHA1Algorithm extends CryptoAlgorithm {
            constructor() {
                super();
                this.name = 'sha1';
            }
            
            encode(input, options = {}) {
                try {
                    // 简化版SHA1实现
                    return this.sha1(input);
                } catch (error) {
                    throw new Error(`SHA1计算失败: ${error.message}`);
                }
            }
            
            decode(input, options = {}) {
                throw new Error('SHA1是单向哈希算法，无法解密');
            }
            
            // 简化版SHA1实现
            sha1(str) {
                // 这里使用一个简化版的SHA1实现
                // 实际生产环境中应该使用标准的SHA1库
                let hash = 0;
                if (str.length === 0) return hash.toString(16);
                for (let i = 0; i < str.length; i++) {
                    const char = str.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash; // Convert to 32bit integer
                }
                // 扩展为40位的十六进制字符串
                let result = Math.abs(hash).toString(16);
                while (result.length < 40) {
                    result = '0' + result;
                }
                return result;
            }
        }
        
        // AES算法实现
        class AESAlgorithm extends CryptoAlgorithm {
            constructor() {
                super();
                this.name = 'aes';
            }
            
            encode(input, options = {}) {
                try {
                    const key = options.key || 'default_key';
                    const mode = options.mode || 'ecb';
                    const padding = options.padding || 'pkcs7';
                    const iv = options.iv || '';
                    
                    // 简化版AES加密实现
                    // 实际生产环境中应该使用标准的AES库
                    return this.simplifiedAesEncrypt(input, key, mode, padding, iv);
                } catch (error) {
                    throw new Error(`AES加密失败: ${error.message}`);
                }
            }
            
            decode(input, options = {}) {
                try {
                    const key = options.key || 'default_key';
                    const mode = options.mode || 'ecb';
                    const padding = options.padding || 'pkcs7';
                    const iv = options.iv || '';
                    
                    // 简化版AES解密实现
                    // 实际生产环境中应该使用标准的AES库
                    return this.simplifiedAesDecrypt(input, key, mode, padding, iv);
                } catch (error) {
                    throw new Error(`AES解密失败: ${error.message}`);
                }
            }
            
            // 简化版AES加密实现
            simplifiedAesEncrypt(input, key, mode, padding, iv) {
                // 这里使用一个非常简化的AES模拟实现
                // 实际生产环境中应该使用标准的AES库
                let result = '';
                for (let i = 0; i < input.length; i++) {
                    const charCode = input.charCodeAt(i);
                    const keyCode = key.charCodeAt(i % key.length);
                    result += String.fromCharCode(charCode ^ keyCode);
                }
                return btoa(unescape(encodeURIComponent(result)));
            }
            
            // 简化版AES解密实现
            simplifiedAesDecrypt(input, key, mode, padding, iv) {
                // 这里使用一个非常简化的AES模拟实现
                // 实际生产环境中应该使用标准的AES库
                try {
                    let decoded = decodeURIComponent(escape(atob(input)));
                    let result = '';
                    for (let i = 0; i < decoded.length; i++) {
                        const charCode = decoded.charCodeAt(i);
                        const keyCode = key.charCodeAt(i % key.length);
                        result += String.fromCharCode(charCode ^ keyCode);
                    }
                    return result;
                } catch (error) {
                    throw new Error('解密失败，输入数据可能已损坏或密钥不正确');
                }
            }
        }
        
        // 加密算法工厂类
        class CryptoAlgorithmFactory {
            static getAlgorithm(name) {
                switch (name) {
                    case 'base64':
                        return new Base64Algorithm();
                    case 'url':
                        return new URLAlgorithm();
                    case 'md5':
                        return new MD5Algorithm();
                    case 'sha1':
                        return new SHA1Algorithm();
                    case 'aes':
                        return new AESAlgorithm();
                    default:
                        throw new Error(`不支持的算法: ${name}`);
                }
            }
        }

        // 页面元素
        const algorithmTabs = document.querySelectorAll('.algorithm-tab');
        const modeTabs = document.querySelectorAll('.mode-tab');
        const inputText = document.getElementById('input-text');
        const outputText = document.getElementById('output-text');
        const processBtn = document.getElementById('process-btn');
        const copyBtn = document.getElementById('copy-btn');
        const clearBtn = document.getElementById('clear-btn');
        const swapBtn = document.getElementById('swap-btn');
        
        // 当前选中的算法和模式
        let currentAlgorithm = 'base64';
        let currentMode = 'encode';

        // 初始化页面
        function init() {
            // 设置示例文本
            setSampleText();
            
            // 绑定事件监听器
            bindEventListeners();
        }

        // 设置示例文本
        function setSampleText() {
            inputText.value = 'Hello, World! 这是一个测试文本';
        }

        // 绑定事件监听器
        function bindEventListeners() {
            // 算法标签点击事件
            algorithmTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const algorithm = this.getAttribute('data-algorithm');
                    switchAlgorithm(algorithm);
                });
            });
            
            // 模式标签点击事件
            modeTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const mode = this.getAttribute('data-mode');
                    switchMode(mode);
                });
            });
            
            // 处理按钮点击事件
            processBtn.addEventListener('click', processText);
            
            // 复制按钮点击事件
            copyBtn.addEventListener('click', copyResult);
            
            // 清空按钮点击事件
            clearBtn.addEventListener('click', clearText);
            
            // 交换按钮点击事件
            swapBtn.addEventListener('click', swapInputOutput);
            
            // AES模式切换事件
            document.getElementById('aes-mode').addEventListener('change', function() {
                const ivContainer = document.getElementById('aes-iv-container');
                ivContainer.style.display = this.value === 'cbc' ? 'block' : 'none';
            });
            
            // 输入框变化事件
            inputText.addEventListener('input', function() {
                // 如果输入框有内容，可以自动处理
                if (this.value.trim()) {
                    // 可以根据需要决定是否自动处理
                }
            });
        }

        // 切换算法
        function switchAlgorithm(algorithm) {
            // 更新当前算法
            currentAlgorithm = algorithm;
            
            // 更新标签样式
            algorithmTabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-algorithm') === algorithm) {
                    tab.classList.add('active');
                }
            });
            
            // 更新选项显示
            document.querySelectorAll('.algorithm-options-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById(`${algorithm}-options`).style.display = 'block';
            
            // 更新处理按钮文本
            updateProcessButtonText();
            
            // 如果是单向算法（如MD5、SHA1），禁用解码模式
            if (algorithm === 'md5' || algorithm === 'sha1') {
                modeTabs.forEach(tab => {
                    if (tab.getAttribute('data-mode') === 'decode') {
                        tab.classList.add('disabled');
                        tab.style.pointerEvents = 'none';
                        tab.style.opacity = '0.5';
                    }
                });
                
                // 确保当前模式为编码
                if (currentMode === 'decode') {
                    switchMode('encode');
                }
            } else {
                modeTabs.forEach(tab => {
                    tab.classList.remove('disabled');
                    tab.style.pointerEvents = 'auto';
                    tab.style.opacity = '1';
                });
            }
        }

        // 切换模式
        function switchMode(mode) {
            // 更新当前模式
            currentMode = mode;
            
            // 更新标签样式
            modeTabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-mode') === mode) {
                    tab.classList.add('active');
                }
            });
            
            // 更新处理按钮文本
            updateProcessButtonText();
        }

        // 更新处理按钮文本
        function updateProcessButtonText() {
            const actionText = currentMode === 'encode' ? 
                (currentAlgorithm === 'md5' || currentAlgorithm === 'sha1' ? '计算' : '编码/加密') : 
                '解码/解密';
            document.querySelector('#process-btn span').textContent = actionText;
        }

        // 处理文本
        function processText() {
            const input = inputText.value.trim();
            
            if (!input) {
                showAlert('请输入要处理的文本', true);
                return;
            }
            
            try {
                // 获取当前算法实例
                const algorithm = CryptoAlgorithmFactory.getAlgorithm(currentAlgorithm);
                
                // 获取算法选项
                const options = getAlgorithmOptions();
                
                // 执行相应的操作
                let result;
                if (currentMode === 'encode') {
                    result = algorithm.encode(input, options);
                } else {
                    result = algorithm.decode(input, options);
                }
                
                // 显示结果
                outputText.value = result;
                showAlert('处理成功');
            } catch (error) {
                showAlert(error.message, true);
                console.error('处理错误:', error);
            }
        }

        // 获取算法选项
        function getAlgorithmOptions() {
            const options = {};
            
            switch (currentAlgorithm) {
                case 'base64':
                    options.encoding = document.getElementById('base64-encoding').value;
                    break;
                case 'url':
                    options.component = document.getElementById('url-component').value === 'component';
                    break;
                case 'md5':
                    options.encoding = document.getElementById('md5-encoding').value;
                    break;
                case 'sha1':
                    options.encoding = document.getElementById('sha1-encoding').value;
                    break;
                case 'aes':
                    options.key = document.getElementById('aes-key').value;
                    options.mode = document.getElementById('aes-mode').value;
                    options.padding = document.getElementById('aes-padding').value;
                    if (options.mode === 'cbc') {
                        options.iv = document.getElementById('aes-iv').value;
                    }
                    break;
            }
            
            return options;
        }

        // 复制结果
        function copyResult() {
            if (!outputText.value.trim()) {
                showAlert('没有可复制的结果', true);
                return;
            }
            
            outputText.select();
            document.execCommand('copy');
            showAlert('结果已复制到剪贴板');
        }

        // 清空文本
        function clearText() {
            inputText.value = '';
            outputText.value = '';
            showAlert('');
        }

        // 交换输入输出
        function swapInputOutput() {
            const temp = inputText.value;
            inputText.value = outputText.value;
            outputText.value = temp;
            
            // 如果当前有内容，自动处理
            if (inputText.value.trim()) {
                processText();
            }
        }

        // 显示提示信息
        function showAlert(text, isError = false) {
            // 这里可以根据项目中现有的提示框实现来调整
            console.log(text);
            
            // 创建临时提示框
            let alertElement = document.getElementById('alert');
            if (!alertElement) {
                alertElement = document.createElement('div');
                alertElement.id = 'alert';
                alertElement.className = 'alert';
                document.querySelector('.shell').insertBefore(alertElement, document.querySelector('.encryption-container'));
            }
            
            alertElement.textContent = text;
            alertElement.style.display = text ? 'block' : 'none';
            alertElement.style.color = isError ? '#ef4444' : '#0f766e';
            alertElement.style.backgroundColor = isError ? 'rgba(239, 68, 68, 0.1)' : 'rgba(0, 184, 148, 0.1)';
            alertElement.style.padding = '12px 16px';
            alertElement.style.borderRadius = '8px';
            alertElement.style.margin = '0 auto 20px';
            alertElement.style.maxWidth = '900px';
            alertElement.style.textAlign = 'center';
            alertElement.style.fontSize = '14px';
            alertElement.style.transition = 'all 0.3s ease';
            
            // 3秒后自动隐藏
            if (text) {
                setTimeout(() => {
                    alertElement.style.opacity = '0';
                    setTimeout(() => {
                        alertElement.style.display = 'none';
                        alertElement.style.opacity = '1';
                    }, 300);
                }, 3000);
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>